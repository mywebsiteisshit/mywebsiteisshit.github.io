<section class="section" aria-labelledby="engTitle">
  <h2 id="engTitle" class="h2" style="text-align:center;">Engagement étudiant</h2>
  <p style="text-align:center; font-style:italic; color:#555; margin-top:4px;">
    Cliquez sur un bloc pour voir plus de détails
  </p>

  <div class="eng-container">
    <article class="card engagement">
      <div class="eng-header clickable">
        <img src="logo/minitel.png" alt="MINITEL Logo" class="logo">
        <h3 class="h2">MINITEL — Président</h3>
        <span class="toggle-icon">+</span>
      </div>
      <div class="eng-details">
        <p class="muted" style="font-weight:600">Mars 2025 — Aujourd'hui</p>
        <p class="muted">
          Direction de l'association (16 membres) et gestion des projets majeurs :
        </p>
        <ul class="muted">
          <li>Gestion et maintenance du réseau Wi-Fi du campus (150+ appartements étudiants).</li>
          <li>Organisation d'événements LAN en partenariat avec Riot Games et Red Bull.</li>
          <li>Coordination d'équipe, planification d'événements (budget 10k+€).</li>
        </ul>
      </div>
    </article>

    <article class="card engagement">
      <div class="eng-header clickable">
        <img src="logo/handimines.png" alt="Handi'Mines Logo" class="logo">
        <h3 class="h2">Handi'Mines — Membre du Projet (Sensibilisation)</h3>
        <span class="toggle-icon">+</span>
      </div>
      <div class="eng-details">
        <p class="muted">
          Organisation de la Semaine du Handicap : conférences, ateliers interactifs (cécifoot, showdown).
          Production de vidéos de sensibilisation pour promouvoir l’inclusion et l’accessibilité sur le campus.
        </p>
      </div>
    </article>

    <article class="card engagement">
      <div class="eng-header clickable">
        <img src="logo/bde.png" alt="BDE Logo" class="logo">
        <h3 class="h2">Bureau Des Élèves (BDE) — Responsable Merchandising</h3>
        <span class="toggle-icon">+</span>
      </div>
      <div class="eng-details">
        <p class="muted" style="font-weight:600">Avril 2024 — Aujourd'hui</p>
        <p class="muted">
          Gestion de la conception, des commandes et de la distribution des uniformes et produits dérivés pour les promotions entrantes.
        </p>
      </div>
    </article>
    
    <article class="card engagement">
      <div class="eng-header clickable">
        <img src="logo/com.png" alt="Communication Logo" class="logo">
        <h3 class="h2">Ambassadeur Communication</h3>
        <span class="toggle-icon">+</span>
      </div>
      <div class="eng-details">
        <p class="muted" style="font-weight:600">Janvier 2025 — Aujourd'hui</p>
        <p class="muted">
          Collaboration avec l'équipe de communication de l'école (création de flyers, scripts vidéo) pour améliorer l'image publique de l'établissement.
        </p>
      </div>
    </article>

    <article class="card engagement">
      <div class="eng-header clickable">
        <img src="logo/feilogo.png" alt="FEI Logo" class="logo">
        <h3 class="h2">FEI (Forum Entreprises Ingénieurs) — Logistique</h3>
        <span class="toggle-icon">+</span>
      </div>
      <div class="eng-details">
        <p class="muted" style="font-weight:600">Avril 2025 — Aujourd'hui</p>
        <p class="muted">
          Membre du pôle Logistique : organisation événementielle, soutien à l'accueil et au guidage des entreprises et conférenciers pour le salon carrière.
        </p>
      </div>
    </article>

    <article class="card engagement">
      <div class="eng-header clickable">
        <img src="logo/rep.png" alt="Délégué Logo" class="logo">
        <h3 class="h2">Représentant de Promotion (1A & 2A)</h3>
        <span class="toggle-icon">+</span>
      </div>
      <div class="eng-details">
        <p class="muted" style="font-weight:600">Septembre 2024 — Aujourd'hui</p>
        <p class="muted">
          Liaison active entre les étudiants et l'administration pour toutes les questions académiques et logistiques.
        </p>
      </div>
    </article>
    
    <article class="card engagement">
      <div class="eng-header clickable">
        <img src="logo/bar.png" alt="Bar COMIF Logo" class="logo">
        <h3 class="h2">COMIF — Service au Bar & Café Étudiant</h3>
        <span class="toggle-icon">+</span>
      </div>
      <div class="eng-details">
        <p class="muted" style="font-weight:600">Mars 2025 — Aujourd'hui</p>
        <p class="muted">
          Service quotidien de boissons chaudes/froides et de collations pendant les pauses et les soirées associatives.
        </p>
      </div>
    </article>
    
    <article class="card engagement">
      <div class="eng-header clickable">
        <img src="logo/alumni.png" alt="Alumni Logo" class="logo">
        <h3 class="h2">Délégué Réseau Alumni</h3>
        <span class="toggle-icon">+</span>
      </div>
      <div class="eng-details">
        <p class="muted" style="font-weight:600">Rôle à vie</p>
        <p class="muted">
          Représentation de la promotion auprès du réseau des anciens élèves pour assurer la communication et la collaboration.
        </p>
      </div>
    </article>
    
    <article class="card engagement">
      <div class="eng-header clickable">
        <img src="logo/hvssd.png" alt="HVSSD Logo" class="logo">
        <h3 class="h2">HVSSD — Pôle Prévention</h3>
        <span class="toggle-icon">+</span>
      </div>
      <div class="eng-details">
        <p class="muted" style="font-weight:600">Mars 2025 — Aujourd'hui</p>
        <p class="muted">
          Participation aux formations et campagnes de sensibilisation contre le harcèlement et la discrimination sur le campus.
        </p>
      </div>
    </article>

  </div>
</section>

<style>
.eng-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  margin-top: 16px;
  align-items: flex-start; /* FIX: Empêche les cartes non ouvertes de s'étirer verticalement */
}

.engagement {
  width: 300px;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 12px;
  /* La classe .card gère le padding */
  overflow: hidden;
  transition: all 0.3s ease;
  cursor: pointer;
}

.engagement:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.1);
}

.eng-header {
  display: flex;
  align-items: center;
  gap: 12px;
  /* Permet au toggle-icon de se positionner à la fin */
  justify-content: space-between;
}

/* Le padding est maintenant géré par .card, on retire le padding local */
.card.engagement {
    padding: 18px 20px; 
}

/* Style de l'icône de bascule */
.toggle-icon {
    font-size: 20px;
    font-weight: 700;
    line-height: 1;
    color: var(--accent);
    transition: transform 0.3s ease, color 0.3s ease;
    flex-shrink: 0;
}
.eng-header.open .toggle-icon {
    transform: rotate(45deg); /* Fait pivoter le '+' en 'x' */
    color: var(--text);
}

.logo {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  object-fit: contain;
  flex-shrink: 0;
}

.eng-details {
  max-height: 0;
  overflow: hidden;
  /* Utilise la valeur max-height pour l'animation */
  transition: max-height 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), padding-top 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  padding-top: 0; 
  padding-bottom: 0;
}

/* État ouvert: grand max-height + padding */
.eng-details.open {
  max-height: 500px; /* Grande valeur pour animer correctement */
  padding-top: 10px; 
}
</style>